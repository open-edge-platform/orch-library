# SPDX-FileCopyrightText: (C) 2023 Intel Corporation
#
# SPDX-License-Identifier: Apache-2.0
openapi: 3.0.3
info:
  title: Open ID Connect
  description: A minimal section of the Open ID Connect API to facilitate
    code generation.
    Generated by hand from Keycloak docs
    https://developer.okta.com/docs/reference/api/oidc/#token
  version: 0.0.1
paths:
  /protocol/openid-connect/token:
    post:
      tags:
        - Open ID Connect Token
      description: Post a new Query.
      requestBody:
        content:
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/Token'
        required: true
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenResponse'
        default:
          description: Default error response
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TokenError'
  /.well-known/openid-configuration:
    get:
      tags:
        - Open ID Connect Well Known
      description: URL that serves up the well known endpoints
      responses:
        "200":
          description: OK
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/WellKnownResponse'
components:
  schemas:
    Token:
      properties:
        client_id:
          type: string
          description: Obtained during either manual client registration or through the Dynamic Client Registration API. It identifies the client and must match the value preregistered in Keycloak.
        code:
          type: string
          description: Required if grant_type is authorization_code. The value is what was returned from the authorization endpoint. The code has a lifetime of 300 seconds
        code_verifier:
          type: string
          description: Required if grant_type is authorization_code and code_challenge was specified in the original /authorize request. This value is the code verifier for PKCE. Okta uses it to recompute the code_challenge and verify if it matches the original code_challenge in the authorization request.
        grant_type:
          type: string
          enum:
            - authorization_code
            - password
            - client_credentials
            - refresh_token
            - urn:ietf:params:oauth:grant-type:device_code
            - urn:ietf:params:oauth:grant-type:token-exchange
            - urn:ietf:params:oauth:grant-type:saml2-bearer
            - urn:openid:params:grant-type:ciba
        password:
          type: string
          format: password
          description: Required if the grant_type is password.
        redirect_uri:
          type: string
          description: Required if grant_type is authorization_code. Specifies the callback location where the authorization was sent. This value must match the redirect_uri used to generate the original authorization_code.
        refresh_token:
          type: string
          description: Required if grant_type is refresh_token. The value is a valid refresh token that was returned from this endpoint previously.
        scope:
          type: string
          description: Required if password is the grant_type. This is a list of scopes that the client wants to be included in the access token. For the refresh_token grant type, these scopes have to be a subset of the scopes used to generate the refresh token in the first place.
        username:
          type: string
          description: Required if the grant_type is password.
        claims:
          type: string
          description: A comma delimited list of claims required
    TokenResponse:
      description: Based on the scopes requested. Generally speaking, the scopes specified in a request are included in the access token in the response.
      properties:
        access_token:
          type: string
          description: An access token.
        token_type:
          type: string
          description: The audience of the token.
        expires_in:
          type: integer
          description: The expiration time of the access token in seconds.
        refresh_expires_in:
          type: integer
          description: The expiration time of the refresh token in seconds.
        scope:
          type: string
          description: The scopes contained in the access token.
        refresh_token:
          type: string
          description: An opaque refresh token. This is returned if the offline_access scope is granted.
        id_token:
          type: string
          description: An ID token. This is returned if the openid scope is granted.
        device_secret:
          type: string
          description: An opaque device secret. This is returned if the device_sso scope is granted.
    TokenError:
      properties:
        error:
          type: string
          enum:
           - invalid_client
           - invalid_grant
           - invalid_request
           - invalid_scope
           - unsupported_grant_type
        error_description:
          type: string
    WellKnownResponse:
      description: Publicly available resource that gives paths to other resources.
      properties:
        issuer:
          type: string
          description: Issuer URL
        authorization_endpoint:
          type: string
          description: Authorization Endpoint URL
        token_endpoint:
          type: string
          description: Token Endpoint URL
        introspection_endpoint:
          type: string
          description: Introspection Endpoint URL
        userinfo_endpoint:
          type: string
          description: Userinfo Endpoint URL
        end_session_endpoint:
          type: string
          description: Endsession Endpoint URL
        frontchannel_logout_session_supported:
          type: boolean
          description: Frontchannel Logout Session Supported
        frontchannel_logout_supported:
          type: boolean
          description: Frontchannel Logout Supported
        jwks_uri:
          type: string
          description: JWKS URI
        check_session_iframe:
          type: string
          description: Check Session iFrame URL
        registration_endpoint:
          type: string
          description: Registration Endpoint URL
        grant_types_supported:
          type: array
          items:
            type: string
          description: Grant Types Supported
        acr_values_supported:
          type: array
          items:
            type: string
          description: ACR Values Supported
        response_types_supported:
          type: array
          items:
            type: string
          description: Response Types Supported
        subject_types_supported:
          type: array
          items:
            type: string
          description: Subject Types Supported
        id_token_signing_alg_values_supported:
          type: array
          items:
            type: string
          description: ID Token signing alg values Supported
        id_token_encryption_alg_values_supported:
          type: array
          items:
            type: string
          description: ID Token encryption alg values Supported
        id_token_encryption_enc_values_supported:
          type: array
          items:
            type: string
          description: ID Token encryption enc values Supported
        userinfo_signing_alg_values_supported:
          type: array
          items:
            type: string
          description: UserInfo Signing alg values Supported
        userinfo_encryption_alg_values_supported:
          type: array
          items:
            type: string
          description: UserInfo Encryption alg values Supported
        userinfo_encryption_enc_values_supported:
          type: array
          items:
            type: string
          description: UserInfo Encryption enc values Supported
        request_object_signing_alg_values_supported:
          type: array
          items:
            type: string
          description: Request Object Signing alg values Supported
        request_object_encryption_alg_values_supported:
          type: array
          items:
            type: string
          description: Request Object Encryption alg values Supported
        request_object_encryption_enc_values_supported:
          type: array
          items:
            type: string
          description: Request Object Encryption enc values Supported
        response_modes_supported:
          type: array
          items:
            type: string
          description: Response Modes Supported
        token_endpoint_auth_methods_supported:
          type: array
          items:
            type: string
          description: Token Endpoint Auth Methods Supported
        token_endpoint_auth_signing_alg_values_supported:
          type: array
          items:
            type: string
          description: Token Endpoint Auth Signing Alg Values Supported
        introspection_endpoint_auth_methods_supported:
          type: array
          items:
            type: string
          description: Introspection Endpoint Auth Methods Supported
        introspection_endpoint_auth_signing_alg_values_supported:
          type: array
          items:
            type: string
          description: Introspection Endpoint Auth Signing Alg Values Supported
        authorization_signing_alg_values_supported:
          type: array
          items:
            type: string
          description: Authorization Signing Alg Values Supported
        authorization_encryption_alg_values_supported:
          type: array
          items:
            type: string
          description: Authorization Encryption Alg Values Supported
        authorization_encryption_enc_values_supported:
          type: array
          items:
            type: string
          description: Authorization Encryption Enc Values Supported
        claims_supported:
          type: array
          items:
            type: string
          description: Claims Supported
        claim_types_supported:
          type: array
          items:
            type: string
          description: Claim Types Supported
        claims_parameter_supported:
          type: boolean
          description: Claims Parameter Supported
        scopes_supported:
          type: array
          items:
            type: string
          description: Scopes Types Supported
        request_parameter_supported:
          type: boolean
          description: Request Parameter Supported
        request_uri_parameter_supported:
          type: boolean
          description: Request URI Parameter Supported
        require_request_uri_registration:
          type: boolean
          description: Require Request URI Registration
        code_challenge_methods_supported:
          type: array
          items:
            type: string
          description: Code Challenge Methods Supported
        tls_client_certificate_bound_access_tokens:
          type: boolean
          description: TLS Client Certificate Bound Access Tokens
        revocation_endpoint:
          type: string
          description: Revocation Endpoint URL
        revocation_endpoint_auth_methods_supported:
          type: array
          items:
            type: string
          description: Revocation Endpoint Auth Methods Supported
        revocation_endpoint_auth_signing_alg_values_supported:
          type: array
          items:
            type: string
          description: Revocation Endpoint Auth Signing Alg Values Supported
        backchannel_logout_supported:
          type: boolean
          description: Backchannel Logout Supported
        backchannel_logout_session_supported:
          type: boolean
          description: Backchannel Logout Session Supported
        device_authorization_endpoint:
          type: string
          description: Device Authorization Endpoint
        backchannel_token_delivery_modes_supported:
          type: array
          items:
            type: string
          description: Backchannel Token Delivery Methods Supported
        backchannel_authentication_endpoint:
          type: string
          description: Backchannel Authentication Endpoint
        backchannel_authentication_request_signing_alg_values_supported:
          type: array
          items:
            type: string
          description: Backchannel Authentication Request Signing Alg Values Supported
        require_pushed_authorization_requests:
          type: boolean
          description: Require Pushed Authorization Requests
        pushed_authorization_request_endpoint:
          type: string
          description: Pushed Authorization Request Endpoint
        mtls_endpoint_aliases:
          $ref: '#/components/schemas/MTLS_Endpoint_Aliases'
    MTLS_Endpoint_Aliases:
      type: object
      description: MTLS Endpoint Aliases
      properties:
        token_endpoint:
          type: string
          description: Token Endpoint
        revocation_endpoint:
          type: string
          description: Revocation Endpoint
        introspection_endpoint:
          type: string
          description: Introspection Endpoint
        device_authorization_endpoint:
          type: string
          description: Device Authorization Endpoint
        registration_endpoint:
          type: string
          description: Registration Endpoint
        userinfo_endpoint:
          type: string
          description: Userinfo Endpoint
        pushed_authorization_request_endpoint:
          type: string
          description: Pushed Authorization Request Endpoint
        backchannel_authentication_endpoint:
          type: string
          description: Backchannel Authorization Endpoint
